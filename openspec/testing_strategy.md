# 测试策略 (Testing Strategy)

## 1. 测试目标
确保 MacRank 在不同设备（桌面/移动）、不同网络环境（在线/离线）及不同语言设置下均能稳定运行，且性能数据准确。

## 2. 单元测试 (Unit Testing)
*虽然目前主要依赖手动测试，建议引入 Vitest 进行关键逻辑测试。*

### 2.1 核心算法测试
- **文件**: `lib/scoring.ts`
- **测试点**:
  - `calculateTierScore`: 验证不同 Scenario (Balanced, Developer) 下同一机型的分数变化是否符合预期权重。
  - `getTierLabel`: 边界值测试 (e.g., 8999 vs 9000 分的段位划分)。

### 2.2 数据完整性测试
- **测试点**:
  - 确保所有 `MacModel` 的 `id` 唯一。
  - 确保所有机型的 `basePriceUSD` > 0。
  - 验证 `ChipFamily` 枚举覆盖所有数据项。

## 3. UI/UX 验收测试 (Manual QA)

### 3.1 响应式布局
- **桌面端 (1920x1080)**: 检查表格列是否完整显示，图表是否为宽屏模式。
- **移动端 (iPhone SE/14 Pro)**:
  - 检查表格首列 (机型名) 是否固定 (Sticky)。
  - 检查详情模态框 (Modal) 是否溢出屏幕。
  - 检查底部 AI 聊天窗口是否正确弹出。

### 3.2 交互逻辑
- **搜索**: 输入 "M1" 应立即过滤列表。
- **对比**: 选中第 3 个机型时，是否禁止勾选（Max 2 限制）。
- **图表**: 切换 "Value (Scatter)" 模式，坐标轴是否正确渲染。

### 3.3 国际化 (i18n)
- 切换语言至 "中文" 或 "日本語"。
- 检查：
  - 静态文案是否变为对应语言。
  - 货币符号是否正确 (¥/€/$)。
  - AI 回复是否使用目标语言。

## 4. PWA 与离线测试
1. **安装测试**: 在 Chrome/Safari 中点击 "添加到主屏幕"，验证图标和名称。
2. **断网测试**:
   - 关闭网络 (Airplane Mode)。
   - 刷新页面，验证 App Shell 是否正常加载。
   - 尝试使用 AI 聊天，验证是否触发 "离线模式" 回退逻辑。

## 5. 性能测试 (Lighthouse)
- **目标**:
  - Performance > 90
  - Accessibility > 95
  - Best Practices > 95
  - SEO > 100
- **重点**: 检查 LCP (最大内容绘制) 和 CLS (累积布局偏移)。
